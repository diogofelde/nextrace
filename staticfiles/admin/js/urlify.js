/*global XRegExp*/
"use strict";
{
 const LATIN_MAP = {
 : "A",
 : "A",
 : "A",
 : "A",
 : "A",
 : "A",
 : "AE",
 : "C",
 : "E",
 : "E",
 : "E",
 : "E",
 : "I",
 : "I",
 : "I",
 : "I",
 : "D",
 : "N",
 : "O",
 : "O",
 : "O",
 : "O",
 : "O",
 : "O",
 : "O",
 : "U",
 : "U",
 : "U",
 : "U",
 : "U",
 : "Y",
 : "TH",
 : "Y",
 : "ss",
 : "a",
 : "a",
 : "a",
 : "a",
 : "a",
 : "a",
 : "ae",
 : "c",
 : "e",
 : "e",
 : "e",
 : "e",
 : "i",
 : "i",
 : "i",
 : "i",
 : "d",
 : "n",
 : "o",
 : "o",
 : "o",
 : "o",
 : "o",
 : "o",
 : "o",
 : "u",
 : "u",
 : "u",
 : "u",
 : "u",
 : "y",
 : "th",
 : "y",
 };
 const LATIN_SYMBOLS_MAP = {
 "": "(c)",
 };
 const GREEK_MAP = {
 : "a",
 : "b",
 : "g",
 : "d",
 : "e",
 : "z",
 : "h",
 : "8",
 : "i",
 : "k",
 : "l",
 : "m",
 : "n",
 : "3",
 : "o",
 : "p",
 : "r",
 : "s",
 : "t",
 : "y",
 : "f",
 : "x",
 : "ps",
 : "w",
 : "a",
 : "e",
 : "i",
 : "o",
 : "y",
 : "h",
 : "w",
 : "s",
 : "i",
 : "y",
 : "y",
 : "i",
 : "A",
 : "B",
 : "G",
 : "D",
 : "E",
 : "Z",
 : "H",
 : "8",
 : "I",
 : "K",
 : "L",
 : "M",
 : "N",
 : "3",
 : "O",
 : "P",
 : "R",
 : "S",
 : "T",
 : "Y",
 : "F",
 : "X",
 : "PS",
 : "W",
 : "A",
 : "E",
 : "I",
 : "O",
 : "Y",
 : "H",
 : "W",
 : "I",
 : "Y",
 };
 const TURKISH_MAP = {
 : "s",
 : "S",
 : "i",
 : "I",
 : "c",
 : "C",
 : "u",
 : "U",
 : "o",
 : "O",
 : "g",
 : "G",
 };
 const ROMANIAN_MAP = {
 : "a",
 : "i",
 : "s",
 : "t",
 : "a",
 : "A",
 : "I",
 : "S",
 : "T",
 : "A",
 };
 const RUSSIAN_MAP = {
 : "a",
 : "b",
 : "v",
 : "g",
 : "d",
 : "e",
 : "yo",
 : "zh",
 : "z",
 : "i",
 : "j",
 : "k",
 : "l",
 : "m",
 : "n",
 : "o",
 : "p",
 : "r",
 : "s",
 : "t",
 : "u",
 : "f",
 : "h",
 : "c",
 : "ch",
 : "sh",
 : "sh",
 : "",
 : "y",
 : "",
 : "e",
 : "yu",
 : "ya",
 : "A",
 : "B",
 : "V",
 : "G",
 : "D",
 : "E",
 : "Yo",
 : "Zh",
 : "Z",
 : "I",
 : "J",
 : "K",
 : "L",
 : "M",
 : "N",
 : "O",
 : "P",
 : "R",
 : "S",
 : "T",
 : "U",
 : "F",
 : "H",
 : "C",
 : "Ch",
 : "Sh",
 : "Sh",
 : "",
 : "Y",
 : "",
 : "E",
 : "Yu",
 : "Ya",
 };
 const UKRAINIAN_MAP = {
 : "Ye",
 : "I",
 : "Yi",
 : "G",
 : "ye",
 : "i",
 : "yi",
 : "g",
 };
 const CZECH_MAP = {
 : "c",
 : "d",
 : "e",
 : "n",
 : "r",
 : "s",
 : "t",
 : "u",
 : "z",
 : "C",
 : "D",
 : "E",
 : "N",
 : "R",
 : "S",
 : "T",
 : "U",
 : "Z",
 };
 const SLOVAK_MAP = {
 : "a",
 : "a",
 : "c",
 : "d",
 : "e",
 : "i",
 : "l",
 : "l",
 : "n",
 : "o",
 : "o",
 : "r",
 : "s",
 : "t",
 : "u",
 : "y",
 : "z",
 : "a",
 : "A",
 : "C",
 : "D",
 : "E",
 : "I",
 : "L",
 : "L",
 : "N",
 : "O",
 : "O",
 : "R",
 : "S",
 : "T",
 : "U",
 : "Y",
 : "Z",
 };
 const POLISH_MAP = {
 : "a",
 : "c",
 : "e",
 : "l",
 : "n",
 : "o",
 : "s",
 : "z",
 : "z",
 : "A",
 : "C",
 : "E",
 : "L",
 : "N",
 : "O",
 : "S",
 : "Z",
 : "Z",
 };
 const LATVIAN_MAP = {
 : "a",
 : "c",
 : "e",
 : "g",
 : "i",
 : "k",
 : "l",
 : "n",
 : "s",
 : "u",
 : "z",
 : "A",
 : "C",
 : "E",
 : "G",
 : "I",
 : "K",
 : "L",
 : "N",
 : "S",
 : "U",
 : "Z",
 };
 const ARABIC_MAP = {
 : "a",
 : "b",
 : "t",
 : "th",
 : "g",
 : "h",
 : "kh",
 : "d",
 : "th",
 : "r",
 : "z",
 : "s",
 : "sh",
 : "s",
 : "d",
 : "t",
 : "th",
 : "aa",
 : "gh",
 : "f",
 : "k",
 : "k",
 : "l",
 : "m",
 : "n",
 : "h",
 : "o",
 : "y",
 };
 const LITHUANIAN_MAP = {
 : "a",
 : "c",
 : "e",
 : "e",
 : "i",
 : "s",
 : "u",
 : "u",
 : "z",
 : "A",
 : "C",
 : "E",
 : "E",
 : "I",
 : "S",
 : "U",
 : "U",
 : "Z",
 };
 const SERBIAN_MAP = {
 : "dj",
 : "j",
 : "lj",
 : "nj",
 : "c",
 : "dz",
 : "dj",
 : "Dj",
 : "j",
 : "Lj",
 : "Nj",
 : "C",
 : "Dz",
 : "Dj",
 };
 const AZERBAIJANI_MAP = {
 : "c",
 : "e",
 : "g",
 : "i",
 : "o",
 : "s",
 : "u",
 : "C",
 : "E",
 : "G",
 : "I",
 : "O",
 : "S",
 : "U",
 };
 const GEORGIAN_MAP = {
 : "a",
 : "b",
 : "g",
 : "d",
 : "e",
 : "v",
 : "z",
 : "t",
 : "i",
 : "k",
 : "l",
 : "m",
 : "n",
 : "o",
 : "p",
 : "j",
 : "r",
 : "s",
 : "t",
 : "u",
 : "f",
 : "q",
 : "g",
 : "y",
 : "sh",
 : "ch",
 : "c",
 : "dz",
 : "w",
 : "ch",
 : "x",
 : "j",
 : "h",
 };

 const ALL_DOWNCODE_MAPS = [
 LATIN_MAP,
 LATIN_SYMBOLS_MAP,
 GREEK_MAP,
 TURKISH_MAP,
 ROMANIAN_MAP,
 RUSSIAN_MAP,
 UKRAINIAN_MAP,
 CZECH_MAP,
 SLOVAK_MAP,
 POLISH_MAP,
 LATVIAN_MAP,
 ARABIC_MAP,
 LITHUANIAN_MAP,
 SERBIAN_MAP,
 AZERBAIJANI_MAP,
 GEORGIAN_MAP,
 ];

 const Downcoder = {
 Initialize: function () {
 if (Downcoder.map) {
 // already made
 return;
 }
 Downcoder.map = {};
 for (const lookup of ALL_DOWNCODE_MAPS) {
 Object.assign(Downcoder.map, lookup);
 }
 Downcoder.regex = new RegExp(Object.keys(Downcoder.map).join("|"), "g");
 },
 };

 function downcode(slug) {
 Downcoder.Initialize();
 return slug.replace(Downcoder.regex, function (m) {
 return Downcoder.map[m];
 });
 }

 function URLify(s, num_chars, allowUnicode) {
 // changes, e.g., "Petty theft" to "petty-theft"
 if (!allowUnicode) {
 s = downcode(s);
 }
 s = s.toLowerCase(); // convert to lowercase
 // if downcode doesn't hit, the char will be stripped here
 if (allowUnicode) {
 // Keep Unicode letters including both lowercase and uppercase
 // characters, whitespace, and dash; remove other characters.
 s = XRegExp.replace(s, XRegExp("[^-_\\p{L}\\p{N}\\s]", "g"), "");
 } else {
 s = s.replace(/[^-\w\s]/g, ""); // remove unneeded chars
 }
 s = s.replace(/^\s+|\s+$/g, ""); // trim leading/trailing spaces
 s = s.replace(/[-\s]+/g, "-"); // convert spaces to hyphens
 s = s.substring(0, num_chars); // trim to first num_chars chars
 return s.replace(/-+$/g, ""); // trim any trailing hyphens
 }
 window.URLify = URLify;
}